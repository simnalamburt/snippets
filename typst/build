#!/bin/bash
set -euo pipefail; IFS=$'\n\t'

cd "${0%/*}"

mkdir -p ./fonts

#
# Download then verify the zips
#
curl -Lo ./fonts/latin-modern.zip --skip-existing \
  'https://www.gust.org.pl/projects/e-foundry/latin-modern/download/lm2.004otf.zip'
curl -Lo ./fonts/bareon-batang.zip --skip-existing \
  --referer 'https://copyright.keris.or.kr/wft/fntDwnldView' \
  -d 'fntGrpId=GFT202301120000000000002&fntFileId=FTF202312080000000000070' \
  'https://copyright.keris.or.kr/cmm/fntDwnldById'
b2sum --quiet -c <<'EOF'
87472bdd53899c1dfec8f4b8491fabc7878b1f8c1e72424ae0edf79c7f22fd873f6c3e650d3201dfa4481185dffa5960202919a621fd056947540d215eb20bec fonts/bareon-batang.zip
448233fb23437a08997d8cb6d2600709223ce8dc2fbce949652b47071450a7a0a0915bcfa59bb88b5e52e5fdb6021c93c38891fa05f106fa299a61bd3cbefd5e fonts/latin-modern.zip
EOF

#
# Unzip then verify the contents
#
unzip -qf ./fonts/latin-modern.zip -d ./fonts
unzip -qf ./fonts/bareon-batang.zip '*.otf' -d ./fonts
b2sum --quiet -c <<'EOF'
4f2634041b30ff3a9081cd1cf7a09a7c034f615aad73c438413b932e389239f5e1a742f1bc8a118f99d86880aeb1e9f4965fde0c2f7f2f9268225a7c86507925 fonts/HakgyoansimBareonbatangB.otf
b7cd736382907eddf565615f0da61b69a53a6c845ffe322932974f486a6b55410c70c356b15c9d656dae856ad85ffe45fc49140c29b76dbb956f3a8af959f392 fonts/HakgyoansimBareonbatangR.otf
bba9f5d94598a0e5b904f2b72f37ae5918b254fabfd6eb880784a797025d55a7b8b8423788b1cdf9e0db320e1dcd3e566329cf5775533bf47228fc9e6c4f9fb3 fonts/lmmono10-italic.otf
76952d74f94e106a1ae9d17f87204717d15f5de9484a25f87156f555dc844c47eb6343ffa6fd8af762725f5564a544c3e8ae186025a59b76f887aad7db90e9b0 fonts/lmmono10-regular.otf
b0ac1957bab3c5f40b16ef8db2d2c057311b3eebebf4bc09660d25b0a9a8f3bd7091853059d9cb87d8733e4bd85b3f2e4691928a4aef644d01f474e3bcc94ead fonts/lmmono12-regular.otf
348109185d8a4876166d5ce1e731166bc4bdf916ca2d978dd5ca5ce9e889423baf0b13c4cc0e1326ebab9bed4de7ddef775c3383d464d2befc24e2b45c54cf1a fonts/lmmono8-regular.otf
395eed59cf91fb484b75d6f6f78f5e76cf6fad7d4713f4600fc332eab87ed8bb19165297f69274c99325eb6462ae102bec9296652ae30108d3d555ba8d57de0f fonts/lmmono9-regular.otf
51b5933af915111d043f9c641fc7c495d5ec6f4e278bafed892249d6be47dfd476b4c2e5a262de5ecac62d4f8a0d647f61521ea7ae1c40c6b5b28e14f165a2e3 fonts/lmmonocaps10-oblique.otf
d190baa48b62fd88ada9cb9f46860ddd384ecaea08b59d2a32cfe51355ecee55efcf0c5b5cd08c4aca4d476f998347d7971845bc91ed5ab24ba97deed8202359 fonts/lmmonocaps10-regular.otf
6f87ceb3fe077be53a9cf6effe7a1cff3e5b44ff96f59edbf2bf5be0db211579b88178de68329bdcad2b35136e6c9be7ae09b9580695ce8b69745f5b6561e25e fonts/lmmonolt10-boldoblique.otf
1fa6b35a5be93b568cc35b011c4c76f976fb72af44b5c1f0858f906440e9ed8796daea97877c5bd4867392d829854495bf7bf639f2c8a1ba150174654f521a79 fonts/lmmonolt10-bold.otf
2d2c6e18452a878f6071b4ff6f8920efc7ebf3a33847135a9f739a4c3db4c0ebf299f9601fcfcc24d6b7402a8cd04bdfc27bb77ab8b3b5f8c5e9ec54081ab08f fonts/lmmonolt10-oblique.otf
320cd5cf5744475f9f6345dcdbfca35378e7c86a29ea0bbf8cae3ec618ac2d0db178fd98739006df13a9318971138db0514099fb310c8539b3e6d3d90c8ed9e3 fonts/lmmonolt10-regular.otf
6af7483b99b0cd9ae99adec7813cc6ec31ed1441b112d5cc493cb67fd5e2cd09bc6ff3b34602a50a8d5d0c72f893c6aab6cfda295a07e1dc4a3081b7061b9c74 fonts/lmmonoltcond10-oblique.otf
fa60ee594f00a980c9f1f2332f6e60af84620b8325f375aeb577c61ada7cab8a2faed31c01da5af1cbad848196b234d3775488577241b89f80d2286727211911 fonts/lmmonoltcond10-regular.otf
5ad28a5f3feae641c6f5f8bd520850c3c42c363b73fb765bfe69fc879ddbdb35650bdef87f7591172eb032785199c8d131e4f0de520e9edb206cee8a40636512 fonts/lmmonoprop10-oblique.otf
21c67d9c44ba3da82829e8e7ce278ef6cb6f0eaee532689bf9660689aa678495ab96726e9551bbf840e75f4b75d4cb506739fd8c6976515480f711828bddd83a fonts/lmmonoprop10-regular.otf
23568d63461bdddd7dc1a1ed10a81dc261eb607d3a9b06315eb79799d5eb8e09ce575b549a72a22eb743f1cb3165226b5454aa21625f0c248a19a035a33882c4 fonts/lmmonoproplt10-boldoblique.otf
49bd0ebd3f40c38ad7ce540c95cbaa6d7d525d2d6c880720e67db21bd6d32d0c9813de6c46567b97a1810fcde85444f946e6e0fb6e91b5725f696a4b39bd5157 fonts/lmmonoproplt10-bold.otf
89460b0c25e97dbdf29853f4d41825489ab7f2ef034e38dd2abf32b1dd7c8483530f38b41cd48154057229b77651ce395b39d229530ad586982718d8ca690ce9 fonts/lmmonoproplt10-oblique.otf
f7dd64ecd2db82e78e2631479d8c6c5512f0bab349eaada7b0172d4e56871c17f9d39943ffe6b97b9701079bb7efb3a0c9d23fac582657a8edd625fc43e0e65e fonts/lmmonoproplt10-regular.otf
85dce5b6b548bea3da648a3d1ae6c1300e80c0454411eb89fd94f8ecafa52c47d3a721961de217eda530339fa5932f16b02cd57497e343f4a382cca575188c50 fonts/lmmonoslant10-regular.otf
2c58fc74726f25edbdddc874069e9bec02f070785714137124100341cbef3164895137ed5a17200fdba1f8bdaa43f2ca0ed1266da4e25388a4b340555d518a4f fonts/lmroman10-bolditalic.otf
407616a02eaf23a0e0c0bf3e7c7972889d2d9bf878c1199a49f592601d8d3990036e4ab38b61fcd8a472e012e87502cafedec3b3a8b1342cd9940b1c6097ca48 fonts/lmroman10-bold.otf
e9f4b0e4b0b39555fdb1ebe2e120ab36c85579675b411a79e159096202a68880c195d2e863c28d75c31ced1de5c6acdcc42ebad2b2042c02c5dd8c7604022e5d fonts/lmroman10-italic.otf
318b08647254bb227954e6d04c67415b34074eaaef41834d86cdedcfb3e11725260e845643dcb1874475c42f7ef86b731751158f74c3c78fa2814035dfc211f5 fonts/lmroman10-regular.otf
1261d93bba0fb9ea1a4395c467a10478e7c0d0c6499d4a12e136927ca1549eba629291d775b183b7906d40ac6324e2f39cda9d1e03cc49d0a46ae6f747b29fa9 fonts/lmroman12-bold.otf
fdb3253d78d167f85201c4acdeb32de1d1463262ad8df1dceb8088c2715791c5d70b5a611750583861c144eed932624fe8a790aa05d7b852602f1563f8be948c fonts/lmroman12-italic.otf
570c26d3f2869cb93adeed4ccc6cd54ed475a7f546707871a1bb677c789af2bb6696d99a707e1dde839cc992594c19d512b1fce9b3a29d5b09294ed5aa61e5d6 fonts/lmroman12-regular.otf
2a7bd6b06f60af435dcc958159008c9bed9b820999f3a4d86f8453faca734807c9cc2c0f85b855de45ed2fd83d041c7d489b410637e5cabc583eaa210586e0fc fonts/lmroman17-regular.otf
c7ad83aedc6d85661159df88829529ae73b71e1f0943f5e347035b4e264aa272f1cab08bfe9238420ace23263e117781ebeb3a38265ce61093e0ceb46d481401 fonts/lmroman5-bold.otf
2c2b801ee402174ed285d8bb57239eb886f3eede93698307806fec4af6fc0c3f442d02562dacc2d7f0b5a66411766bd66fe28946f6c8dd6f3c65622044834264 fonts/lmroman5-regular.otf
85805766e4a1b959ed4b6e3950af5cfdfaa3f4117199714d35ff3177624e6332bc3f1c88508e9dcae0fb9a0b3e2b60f80e5261dda792beadcb24ace79bc32a86 fonts/lmroman6-bold.otf
84253ebe6006f44c940d24a01476464feff79317dd080e201ff8278cf36e4937fdda3c464df0f4efd02f3e18ce3f7d334c52f6e9d1b940d97894e7e2d0337323 fonts/lmroman6-regular.otf
1c6456352cd66638524bc2792739eb24f7c87e6e1de161b8198f5cccfb4fe8155222eddfb7402b1983ea9efafffd5111bb2460779359ed3b0bc7c99d7e1be603 fonts/lmroman7-bold.otf
6b8ab082b0b5a5a3fdbe51859d405fb79dabdd968fcceef71b49cb03a2889790d9f34e04b35622cc10f462c3c177ad845dc66d6ca36121fc1e4b34fbbe013538 fonts/lmroman7-italic.otf
68db7553d56481313bfb8bfd7453135343f5f20d3b54b95ea45c00c3e0b8d709ebba83f988e1ed915aa0ada88533a6c6bdbdb481ad4519f7ada4977d65ac8733 fonts/lmroman7-regular.otf
fa74522b4212a329cbf1369e77c8f93af51473a8b7e1ab4f6e303a6b26679bd757643c71fb6a606342fb8a77dbbcbe0aa1e2f48915d319e359df13ebd8d714cf fonts/lmroman8-bold.otf
c7d61773cdb5b27fb931035e181cb70f8a7f7f848ead79465139dfff64cfc9e6718319fd96ebfe84067058daefadff0238bf52333978a74de5ea0dc92e7830e5 fonts/lmroman8-italic.otf
100c36b568ba3c2cc815645a471d26ca79bc2941e8c2f3b7f5a59e68dd6e69ef3505cc919e8c2ba0ce67c42ab1dac04fb01d86e4e38dbd79edf683c346d1e53e fonts/lmroman8-regular.otf
2b3fd0adf8784e3d701ca3fd95834865a046c60c2a92d977f2623ae7f5a214a16374bf81f9ac59d491feb748ca45245bce41e2a459294fdbde9e72cfda524cbb fonts/lmroman9-bold.otf
5f01bf41bdf6683f555d90248e841758963a69828f873888353bfd490ccc50e7800c9bb274e0eeebaf32600a75fdbbea843060cdb4f41bea1247641e553fbfbf fonts/lmroman9-italic.otf
cee69e88ee6610ad37f1ca451194c1a5e60babe28905a7230c17bc2710b56230d416565891d92fea5e5371c97be5bf385df2e9b936cb6f372a674dab09cd35bf fonts/lmroman9-regular.otf
f27737bfa490e475ebd8660f14e2e39fb050fd44ae009a158b0822981b86207b01063e335e05f9a25085e1599985ceff988c53b5f83ee61cdb095708b1ed33a0 fonts/lmromancaps10-oblique.otf
5621c5ed54bd4cb89d569f73d563fd01da86eb771ae71bccd823d7235f85a69f3ddff7e3d823d69e24be0c68107e6580f96ba6889955117e2f6e3ef75c4af5d5 fonts/lmromancaps10-regular.otf
53955aee4db3c2ef9f145a756b3d83f9781c2b04322ac6090464c0110a8c262220e80122af94b4b0113b7b69cee9181549948ee201e2cc29ee2a429c4c1a7a7f fonts/lmromandemi10-oblique.otf
88cb44b6aa0acc10fdacf62f366f6adcc0215fb885b0c685cf816ef883684b857295f614760ebebb3de9d9d4ab6155f90af2b33dd57f037a7789e968340f58a9 fonts/lmromandemi10-regular.otf
9ea8da7bf2fee453cd82939f22557570f6b29bd71fed0d76280d3729d3611f0bea5baaedef8398b720025f8878738c8350044916c4a379e2c1df0013f85c2786 fonts/lmromandunh10-oblique.otf
6965b493e760657f86cb4ee1a5ca13da6b5b5e6f7e6426ace467f700b405466c32babea9e42f911d8b00c2f2ead0adc74a9e1b57ffecca8576ae8b93d47d5929 fonts/lmromandunh10-regular.otf
1ff9a0d64c47612ab0a068ffc8c41c0e129dcfc700b6914c52fa720b42984b4bbff0b0e3d84b0d2b1c01e9d814305bdb45b09d281364dcd983fc1d763c9334d7 fonts/lmromanslant10-bold.otf
b9d69adb120e3d7d5973b0bcdb80ba269bbde00801aa428c50e7d91607222b1bc3edfc892f6612ec19012c6825f300cd80641480df9848f8445e0b544ee0db9b fonts/lmromanslant10-regular.otf
f3c7d4f0a0d2ef3caafcc01577956de789f8051b12f6c1021f16ca4c6b6c7fb87fe15a7f53c1c12afdf3013f480f4fc5fa3668598e295b5274326cae4cacab9c fonts/lmromanslant12-regular.otf
17d3d21a712f47eb968520d51b023bcb3d02e03062bdd03501a0e3c769cd87e66b0ac7b36b8fd64bbd4deecd2e1e065f89a3be5ce6cefcb06cc79b90411aa793 fonts/lmromanslant17-regular.otf
534a62b6cf29d64d3572c9b512731ccd7424a45b87757eab363cc3e4c658266e31af08d2d205153ff85a1b2b30e1687ca0c696b26c69b8359d0cf2a71cd6a3c1 fonts/lmromanslant8-regular.otf
dde6f1c355688d8d289646d4543b0d91842420ed41b8954cbf230e209d4557b487820542bc40505920f8f21eec395701941a8706daeb8eecc409185627059306 fonts/lmromanslant9-regular.otf
e9af65d51808551f6de73d81cab7ffec9799fd0aec8db56e3a6ff1f551b0dd2841f05c138c2f0fd2a152211e99e42412b9b28d8a4dfe9e3a642ba2907d8ea035 fonts/lmromanunsl10-regular.otf
e1507192c527c5c215d8551e8edac5aa7b34ed793a5560c782ae521b576a62577fe56c872b01c2a61876b16349ca90b82fa24bd11d7e2a67db636e477a22c9cb fonts/lmsans10-boldoblique.otf
8bb2236515476e97ad2cbe833be2aabb8bd83c2c178cc471c7986ad25105fe5e291b49155238667bcf7919361844d05151a67ea96c903c49cdcb05ae42dad9cb fonts/lmsans10-bold.otf
c322296bace3cb7a94d0a4570933c8e7c78679ea3f48c3e3d945cfd92cd6c2a326de09cf08e5834f020bff08c20006487587841e474e96e9a116c47facb4a8b0 fonts/lmsans10-oblique.otf
366736ae64fc2c5853ed6654554ce3edca94658d893a5894fb4d46c9711f9a32b7e031470139967ddca61cc555916e8500ae65b3aa22f064c6a4b14f57ed0eee fonts/lmsans10-regular.otf
c1f8f31df7786f1bd455ea0b9aa063421d39d528c2fba0723ea0d630c6f59f29467da4df1dd660213bb66371ae5c6af56ba2c9e4827311fb121a63a67e3d9f71 fonts/lmsans12-oblique.otf
5027d5f2871d5560c144cf44b234807a17e1b078abed95184abed33fba92caad300f627e9d3a484dc303de9688ed474e829797c549ebc3f83ba1546757f7037e fonts/lmsans12-regular.otf
b8d6a3baa80b004b838b48fe4d168ea8b1b652ed470572cb84bd65bf858dae5dd13a14b60488578ceef341f89e119972b0b2c6a93510dbbeb420ac90b8670ee1 fonts/lmsans17-oblique.otf
71ef42a20ff6870bdf48f02027cd39c9fa6540914692b377c7f489d72bdb9cd50c8d0dd6974a1c3023b9ce219d21b4962cc2acbc6ca8864731698ca7d1cfe274 fonts/lmsans17-regular.otf
be40d1ec5e6635360498405976d8f22eab35b1082b9e52067659cf285c0aa9ba4736d6691182f3a9c1b4d123d0143a1b06c760a50b54934aac5087b096ebe452 fonts/lmsans8-oblique.otf
b3b8ab140c771205726fc6b145a895fe798190d3498b79c972efbf3937da3987af7ad0d972398657b021cae3a071a52ab8bdff806e8431b97df93dbf4ecb3f96 fonts/lmsans8-regular.otf
e3f2dfb563f2809aa9ee5c1069f3376e8258ff63d0c1405d8f49ae9c36cdce52653f59949a35600f9df574801b70d1461cf8ab48acb44f1b27d33ee2edb2a4dc fonts/lmsans9-oblique.otf
ff5ec0beb31ca4856537970d6b699a5dcef1d22d2010c9cf24074104b18d011d2e81d362703db0f8839a8c4f5398f8511a7cdba519ba874cdb73171ffaf3491e fonts/lmsans9-regular.otf
e01250e238e840f49f08c723b0252cedc01b5123e6be1b4a45d3ab7ccba2b5201925dec874e7a33806791a2c41184936f353a713d168d9388b148fd931de6ae6 fonts/lmsansdemicond10-oblique.otf
7a7db368ae43e4dea9d4f18f07c40a7c889f9bb9ff7587f87e473d1a5525cca945230648116dacc7145680d60abdc7aab89712f15a14fa85258f189b3055f6a3 fonts/lmsansdemicond10-regular.otf
65fec68b48486d1b8b3380e2a8263fb1ddb8cbcfe2f4847395f895beee10d82054fe0d142325fbee9b1d3bd9cbe62913cf976902a4432e58fe73deb529a24d12 fonts/lmsansquot8-boldoblique.otf
ce402c829531ef5435728b051dff686cbd00535d4f56c63bba40538c2b535606ffeec90368e49986a1200c74e3921dfec7b6feea80dc30e93fed3f9d4e5e07b0 fonts/lmsansquot8-bold.otf
22772b2de6c3981aa85e287974060aa3b54eaa36e8b985b3064590725ade8274d2a18302c1751436c129c7aea273047c41213345115f7a8a5f5fb1693243e5e0 fonts/lmsansquot8-oblique.otf
ed6f83ac4088ce10fe8c5dc0306f06225861f90c293f727f27ace8552e19d49f930e7d27f77aab59a76b1bf9f7d7047657c9b42385049a8fa0a370c34ba344f0 fonts/lmsansquot8-regular.otf
EOF

#
# Build all
#
typst compile --font-path fonts *.typ
